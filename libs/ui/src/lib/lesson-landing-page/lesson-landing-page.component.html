<div *ngIf="lesson">
  <div
    class="lesson-image"
    [ngClass]="
      sideNavOpen
        ? 'lesson-image-no-gradient center-titles'
        : 'lesson-image-gradient'
    "
    fxLayout="column"
    [fxLayoutAlign]="sideNavOpen ? 'center center' : 'center start'"
  >
    <div class="btn-container">
      <div class="example-sidenav-content">
        <button
          type="button"
          mat-raised-button
          class="snav-open-button"
          (click)="isScreenSmall ? openModal() : drawer.toggle()"
        >
          <div
            fxLayout="row"
            fxLayoutAlign="center center"
            fxLayoutGap.gt-md="16px"
            fxLayoutGap.lt-lg="8px"
          >
            <img src="courses/images/svg/menu_lessons.svg" />
          </div>
        </button>
      </div>
      <mat-drawer-container class="example-container" autosize>
        <mat-drawer
          #drawer
          class="dropdown-container"
          mode="side"
          position="end"
        >
          <cirrus-stages-overlay
            [workbook]="workbook"
            (navigateToLesson)="navigate($event)"
          ></cirrus-stages-overlay>
        </mat-drawer>
      </mat-drawer-container>
    </div>
    <div class="content">
      <h1>{{ lesson.title }}</h1>
      <h4>{{ lesson.system_name }}</h4>

      <cirrus-lesson-progress
        [sideNavOpen]="sideNavOpen"
        [lesson]="lesson"
      ></cirrus-lesson-progress>
      <button
        class="start-lesson"
        mat-raised-button
        color="accent"
        (click)="startLesson()"
        [ngClass]="{ 'course-complete': courseComplete }"
      >
        {{ buttonText }}
      </button>
    </div>
  </div>

  <div
    class="llp-container"
    [ngClass]="instructorView ? 'instructor-view' : 'student-view'"
  >
    <div
      *ngIf="!instructorView && progress"
      class="cirrus-progress-row"
      fxLayout="row"
      fxLayoutAlign="space-between"
    >
      <cirrus-progress-card
        *ngFor="let item of progress"
        [progress]="item"
      ></cirrus-progress-card>
    </div>
    <br *ngIf="instructorView" />

    <cirrus-lesson-contents
      id="cirrus-lesson-contents"
      [instructorView]="instructorView"
      [lesson]="lesson"
      (fetchMedia)="fetchMedia($event)"
    >
    </cirrus-lesson-contents>
  </div>
</div>
