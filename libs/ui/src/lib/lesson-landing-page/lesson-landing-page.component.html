<ng-container *ngIf="lesson">
  <div
    class="lesson-image"
    [ngClass]="
      sideNavOpen
        ? 'lesson-image-no-gradient center-titles'
        : 'lesson-image-gradient'
    "
    fxLayout="column"
    [fxLayoutAlign]="sideNavOpen ? 'center center' : 'center start'"
  >
    <div class="content">
      <img
        class="snav-open-button"
        src="/courses/assets/ui/images/svg/sidenav2.svg"
        (click)="openSideNavClick()"
        [ngClass]="{
          open: sideNavOpen === true,
          closed: sideNavOpen === false
        }"
      />
      <h1>{{ lesson.title }}</h1>
      <h4>{{ lesson.system_name }}</h4>

      <div
        fxLayout="row"
        [fxLayoutAlign]="sideNavOpen ? 'center start' : 'start start'"
        fxLayoutGap="24px"
      >
        <div
          class="self-study"
          fxLayout="row"
          fxLayoutAlign="space-between center"
          fxLayoutGap="8px"
        >
          <img src="/courses/assets/ui/images/svg/not-started.svg" />
          <span> Self Study </span>
        </div>
        <div>
          <div
            class="assessment"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            fxLayoutGap="8px"
          >
            <img src="/courses/assets/ui/images/svg/not-started.svg" />
            <span> Assessment </span>
          </div>
          <div class="sign-offs-warning-container">
            <img src="/courses/assets/ui/images/svg/sign-off-warning.svg" />
            <span class="sign-offs-required"
              >Instructor sign offs required</span
            >
          </div>
        </div>
      </div>
      <button mat-raised-button color="accent" (click)="startLesson()">
        Start Lesson
      </button>
    </div>
  </div>

  <div class="llp-container">
    <div
      *ngIf="!instructorView && progress"
      class="cirrus-progress-row"
      fxLayout="row"
      fxLayoutAlign="space-between"
      fxLayoutGap="24px"
    >
      <mat-card *ngFor="let item of progress" fxFlex="14">
        <img [src]="mapProgressTypeToUrl(item.type)" />
        <div class="progress-type">{{ item.type }}</div>
        <div>
          <span class="courses-completed">{{ item.completedCourses }}</span
          ><span class="total-courses">/{{ item.totalCourses }}</span>
        </div>
      </mat-card>
    </div>

    <div
      class="content-container"
      [ngClass]="
        instructorView ? 'instructor-intro-video' : 'student-intro-video'
      "
      fxLayout="column"
      fxLayoutAlign="space-between stretch"
    >
      <div class="intro-video">
        <h2>Intro Video</h2>
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
          <!-- <mat-icon (click)="startLesson()">play_circle</mat-icon> -->
          <img [src]="playListButtonFilledIn" (click)="startLesson()" />
          <div>{{ instructorView ? 'Instructor' : 'Student' }} Intro</div>
        </div>
      </div>
    </div>

    <div
      class="content-container"
      fxLayout="column"
      fxLayoutAlign="space-between stretch"
    >
      <cirrus-lesson-content-item
        [ngClass]="instructorView ? 'instructor-view' : 'student-view'"
        *ngFor="let item of lesson.contents"
        [instructorView]="instructorView"
        [item]="item"
        (fetchMediaOutput)="fetchMedia($event, item)"
      ></cirrus-lesson-content-item>
    </div>
  </div>
</ng-container>
