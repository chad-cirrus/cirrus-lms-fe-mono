<div cdkOverlayOrigin #originOverlay="cdkOverlayOrigin" (click)="toggleMenu()">
  <cirrus-global-header-dropdown
    [isScreenSmall]="isScreenSmall"
    [cirrusUser]="cirrusUser"
  ></cirrus-global-header-dropdown>
</div>
<ng-template
  cdkConnectedOverlay
  cdkConnectedOverlayHasBackdrop
  cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
  [cdkConnectedOverlayOrigin]="originOverlay"
  [cdkConnectedOverlayOpen]="(showPanel$ | async)!"
>
  <section>
    <div
      [ngClass]="
        isScreenSmall ? 'dropdown-container-hamburger' : 'dropdown-container'
      "
    >
      <cirrus-global-menu-slider
        [activePane]="isLeftVisible ? 'left' : 'right'"
      >
        <div leftPane>
          <div
            *ngIf="showDashboard"
            fxLayout="row"
            fxLayoutAlign="space-between"
            class="menu-item small"
            (click)="isLeftVisible = false"
          >
            <div>Dashboard</div>
            <div><mat-icon>keyboard_arrow_right</mat-icon></div>
          </div>

          <div class="menu-item small">
            <a [href]="editProfileUrl" target="_blank"> Edit Profile </a>
          </div>

          <div
            class="menu-item-with-border small"
            routerLink="purchase-history"
          >
            Purchase History
          </div>
          <div class="menu-item small">
            <a
              href="https://www.cirrusapproach.com/learn-to-fly/"
              target="_blank"
            >
              Learn to Fly
            </a>
          </div>
          <div class="menu-item menu-item-with-border small">
            <a
              href="https://www.cirrusapproach.com/flight-fix/"
              target="_blank"
            >
              Flight Fix
            </a>
          </div>
          <div
            *ngIf="!cirrusImpersonationReturnUser?.id"
            class="menu-item small"
            (click)="emitLogout()"
          >
            Logout
          </div>
          <div
            *ngIf="cirrusImpersonationReturnUser?.id"
            class="menu-item small"
            (click)="emitImpersonationLogout()"
          >
            Impersonation Logout
          </div>
        </div>

        <div
          rightPane
          fxLayout="column"
          fxLayoutAlign="center center"
          class="right-pane"
        >
          <div
            fxLayout="row"
            class="menu-item menu-item-with-border small"
            (click)="isLeftVisible = true"
          >
            <div>
              <img
                class="chevron"
                src="courses/images/svg/mobile-left-chevron.svg"
              />
            </div>
            <div class="back-text">Back</div>
          </div>
          <div
            class="menu-item small"
            routerLink="ctc/dashboard"
            *ngIf="showCTCDashboard"
          >
            CTC Dashboard
          </div>
          <div
            class="menu-item small border-radius-bottom-fix"
            routerLink="admin/dashboard"
            *ngIf="showLMSDashboard"
          >
            LMS Dashboard
          </div>
        </div>
      </cirrus-global-menu-slider>
    </div>
  </section>
</ng-template>
